<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Raw Materials</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>Raw Materials</h1>
    <a href="index.html">‚Üê Back to Home</a>
    
    <div id="loading">Loading raw materials...</div>
    <ul id="materialsList" style="display:none;"></ul>

    <script>
        const API_BASE = 'https://localhost:44340';
        
        async function loadMaterials() {
            try {
                console.log('Fetching from:', `${API_BASE}/api/rawmaterials`);
                
                const response = await fetch(`${API_BASE}/api/rawmaterials`);
                console.log('Response status:', response.status);
                
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${await response.text()}`);
                }
                
                const materials = await response.json();
                console.log('Materials received:', materials);
                
                const ul = document.getElementById('materialsList');
                const loading = document.getElementById('loading');
                
                if (materials.length === 0) {
                    loading.innerHTML = 'No raw materials found';
                    return;
                }
                
                ul.innerHTML = '';
                materials.forEach(m => {
                    const li = document.createElement('li');
                    li.textContent = `${m.code || m.name} - Stock: ${m.stockQuantity || 0}`;
                    ul.appendChild(li);
                });
                
                loading.style.display = 'none';
                ul.style.display = 'block';
                
            } catch (error) {
                console.error('Error details:', error);
                document.getElementById('loading').innerHTML = 
                    `Error: ${error.message}<br>
                     <button onclick="loadMaterials()">Try Again</button>`;
            }
        }

        loadMaterials();
    </script>
</body>
</html>